{% extends "base.html" %}
{% load static %}
{% block title %}Collection{% endblock title %}

{% block content %}
<div class="p-5">

  <div class="flex justify-between items-center">

    <h1 class="text-3xl font-semibold">{{ user.username }}'s Collection:</h1>

    <form method="GET" action="{% url 'collection.index' %}" class="flex items-center gap-2">
      
      <select name="search_field" class="select w-32">
        <option disabled {% if not request.GET.search_field %}selected{% endif %}>Search By</option>
        <option value="pokemon" {% if request.GET.search_field == 'pokemon' or not request.GET.search_field %}selected{% endif %}>Pokemon</option>
        <option value="name" {% if request.GET.search_field == 'name' %}selected{% endif %}>Name</option>
      </select>

      <input type="text" name="q" placeholder="Search your Pokemon..." class="input w-xxxs" value="{{ request.GET.q }}">

      <button type="submit" class="btn btn-accent rounded-lg">Search</button>

    </form>

  </div>

  {% if request.GET.q and collection.count != 0 %}
    <div class="text-center mt-4">
      <p class="text-lg font-normal">Showing results for "{{ request.GET.q }}"</p>
    </div>
  {% endif %}

  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-4">
    {% for pokemon in collection %}
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <a href="{% url 'collection.detail' id=pokemon.id %}">
                <img src="{{ pokemon.image }}" alt="{{ pokemon.name }}" class="w-full object-cover">
                <div class="p-4 flex justify-between items-center">
                    <h3 class="text-lg font-semibold text-gray-800">{{ pokemon.name }}</h3>
                    <p class="text-lg font-normal text-gray-500">{{ pokemon.data.name }}</p>
                </div>
            </a>
        </div>
    {% endfor %}
  </div>

  {% if collection.count == 0 %}
    <div class="flex justify-center items-center min-h-[calc(100vh-14rem)]">
      <div class="grid place-content-center">
        <h1 class="text-3xl font-semibold text-center">No Pokemon matching this search...</h1>
      </div>
    </div>
  {% endif %}

</div>

{% endblock content%}