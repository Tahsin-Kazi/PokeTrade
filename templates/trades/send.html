{% extends 'base.html' %}
{% block title %}Trade with {{ receiver.user.username }}{% endblock title %}

{% block content %}
<div class="trade-container">
    <h2>Trade with {{ receiver.user.username }}</h2>

    <form method="POST" class="trade-form">
        {% csrf_token %}

        <div class="trade-columns">
            <!-- Sender's Pokemon -->
            <div class="trade-column">
                <h3>Your Pokemon</h3>
                <div class="pokemon-grid">
                    {% for pokemon in sender_pokemon %}
                    <div class="pokemon-card">
                        <input type="checkbox" name="sender_pokemon" value="{{ pokemon.id }}" id="sender-{{ pokemon.id }}">
                        <label for="sender-{{ pokemon.id }}">
                            <img src="{{ pokemon.image }}" alt="{{ pokemon.name }}" width="100">
                            <p>{{ pokemon.name }}</p>
                            {% if pokemon.nickname %}
                            <p>"{{ pokemon.nickname }}"</p>
                            {% endif %}
                        </label>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Trade buttons in middle -->
            <div class="trade-actions">
                <button type="submit" name="create_trade" class="btn btn-success">Send Trade</button>
                <button type="submit" name="cancel_trade" class="btn btn-danger">Cancel</button>
            </div>

            <!-- Receiver's Pokemon -->
            <div class="trade-column">
                <h3>{{ receiver.user.username }}'s Pokemon</h3>
                <div class="pokemon-grid">
                    {% for pokemon in receiver_pokemon %}
                    <div class="pokemon-card">
                        <input type="checkbox" name="receiver_pokemon" value="{{ pokemon.id }}" id="receiver-{{ pokemon.id }}">
                        <label for="receiver-{{ pokemon.id }}">
                            <img src="{{ pokemon.image }}" alt="{{ pokemon.name }}" width="100">
                            <p>{{ pokemon.name }}</p>
                            {% if pokemon.nickname %}
                            <p>"{{ pokemon.nickname }}"</p>
                            {% endif %}
                        </label>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </form>
</div>

<style>
    .trade-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .trade-columns {
        display: flex;
        gap: 20px;
        margin-top: 30px;
    }

    .trade-column {
        flex: 1;
        border: 2px solid #ddd;
        padding: 15px;
        border-radius: 8px;
    }

    .trade-actions {
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 10px;
        padding: 0 20px;
    }

    .pokemon-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 15px;
        margin-top: 15px;
    }

    .pokemon-card {
        text-align: center;
        cursor: pointer;
    }

    .pokemon-card input[type="checkbox"] {
        display: none;
    }

    .pokemon-card input[type="checkbox"]:checked + label {
        background-color: #e3f2fd;
        border: 2px solid #2196f3;
        border-radius: 5px;
    }

    .pokemon-card label {
        display: block;
        padding: 10px;
        transition: all 0.2s;
    }

    .pokemon-card label:hover {
        background-color: #f5f5f5;
    }

    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
    }

    .btn-success {
        background-color: #4caf50;
        color: white;
    }

    .btn-danger {
        background-color: #f44336;
        color: white;
    }
</style>
{% endblock %}